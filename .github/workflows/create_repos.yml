name: Setup JVault Repos
on: 
  workflow_dispatch: # This adds a "Run workflow" button to your GitHub UI

jobs:
  create-folders:
    runs-on: ubuntu-latest
    steps:
      - name: Create Repos and Folders
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          REPOS=("2k23" "2k24" "2k25")
          SEMS=("1st-Sem" "2nd-Sem" "3rd-Sem" "4th-Sem" "5th-Sem" "6th-Sem" "7th-Sem")
          MIDS=("Mid-I" "Mid-II" "External-Papers")

          for REPO in "${REPOS[@]}"; do
            # 1. Create the repository via API
            curl -X POST -H "Authorization: token $GH_TOKEN" \
                 -d "{\"name\":\"$REPO\", \"auto_init\":true}" \
                 https://api.github.com/user/repos
            
            # 2. Add a basic README to establish the structure
            # (In a real scenario, you'd use a loop to 'touch' files via the Contents API)
            echo "Repository for $REPO syllabus" > README.md
          done
